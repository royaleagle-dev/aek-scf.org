{% extends "adminPanel/base.html" %}

{% block title %}
Web Administration
{% endblock %}

{% block content %}

<div style = "margin-top: 100px;">
	<div class = "row mt-5">
		<div class = " offset-md-4 col-md-4">

			<div class = "panel" id = "eventContainer-{{$event->id}}">
				<h5>Website Visitors (Unique Visits)</h5> 
				<hr>
				<h3>Today</h3>
                <h1>{{$todayVisitors}}</h1>
				<hr>
                <h3>All Time</h3>
                <h1>{{$allVisitors}}</h1>
                <hr>
				
			</div>

		</div>
	</div>
</div>

{% endblock %}

{% block otherCSS %}
<style>
.panel{
	padding: 5%;
	background-color: white;
	text-align: left;
	margin-bottom: 2%;
	box-shadow:  5px 5px 15px grey;
}

.modal-backdrop{
	background-color: rgba(0, 0, 100, 0.8);
	width: 100%;
	height: 100%;
	position: fixed;
	z-index: 10000;
	top: 0;
	left: 0;
	overflow: hidden;
}

.modal-panel{
	background-color: white;
	padding: 15px;
	width: 30%;
	position: relative;
	margin: 0 auto;
	height: 50%;
}

.modal-cancel{
	color: white;
	position: relative;
	bottom:  0;
	left: 70%;
}

.modal-cancel:hover{
	cursor: pointer;
	color: yellow;
}

.modal-panel input, .modal-panel textarea{
	margin-bottom: 4%;
}
</style>
{% endblock %}

{% block otherJS %}
<script>
	function editEvent(eventId){
		const btnElement = document.getElementById(`editEvent-${eventId}`);
		const title = btnElement.dataset['title'];
		const description = btnElement.dataset['description'];
		const eventDate = btnElement.dataset['date'];

		$("#editTitle").val(title);
		$("#editDescription").val(description);
		$("#editDate").val(eventDate);
		$("#eventId").val(eventId);

		$("#editEvent").show('fast');

		$("#cancelEdit").click(function(){
			$("#editEvent").hide('fast');
		})
	}
</script>
<script>
	function goTo(location){
		window.location = location;
	}

	$("#addNewEvent").click(function(){
		$("#addEvent").show('fast');
	})

	$(".modal-cancel").click(function(){
		$('#addEvent').hide('fast');
	})
</script>

<script>
	function confirmDeleteEvent(eventId){
		confirmDelete = confirm("Do you really want to delete this Event");
		if(confirmDelete){
			deleteEvent(eventId)
		}
	}

	function deleteEvent(eventId){
		$.get(`{% url deleteEvent %}/${eventId}`, success = function(response){
			const data = JSON.parse(response);
			const status = data.status;
			if(status == 'success'){
				//hide the container
				const eventContainer = $(`#eventContainer-${eventId}`).hide('fast');

			}

		})
	}
</script>
{% endblock %}